<!DOCTYPE html>
<html lang="ka">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>AIWtaxi – მძღოლის კაბინეტი</title>

<style>
body{
  margin:0;
  font-family: Arial, sans-serif;
  background:#000;
  color:#fff;
  text-align:center;
}

h2{ color:#f5c400; }

input{
  width:90%;
  max-width:360px;
  padding:14px;
  margin:10px 0;
  border-radius:10px;
  border:none;
  font-size:16px;
}

button{
  width:90%;
  max-width:360px;
  padding:14px;
  margin-top:12px;
  border:none;
  border-radius:25px;
  background:#4da3ff;
  color:#000;
  font-size:18px;
  font-weight:bold;
}

.card{
  background:#111;
  border-radius:16px;
  padding:20px;
  margin:20px auto;
  width:90%;
  max-width:400px;
}
</style>
</head>

<body>

<h2>AIWtaxi – მძღოლის კაბინეტი</h2>

<!-- ძებნა -->
<div id="searchBlock">
  <input id="searchPhone" placeholder="+9955XXXXXXXX"/>
  <button onclick="findDriver()">მოძებნა</button>
</div>

<!-- მძღოლი -->
<div id="driverBlock" style="display:none;" class="card">
  <p><b>სახელი:</b> <span id="firstName"></span></p>
  <p><b>გვარი:</b> <span id="lastName"></span></p>
  <p><b>ტელეფონი:</b> <span id="phone"></span></p>

  <h3 style="color:#f5c400;">
    ბალანსი: <span id="balance"></span> ₾
  </h3>

  <input id="amount" type="number" placeholder="გადარიცხვის თანხა ₾"/>
  <button onclick="transfer()">გადარიცხვა</button>

  <p id="result" style="margin-top:10px;"></p>

  <button style="background:#666;margin-top:20px;" onclick="resetDriver()">
    სხვა მძღოლი
  </button>
</div>

<script>
// --- ტესტური მონაცემები (შემდეგ API-თ ჩაანაცვლებ) ---
const DRIVERS = {
  "+995571222667":{
    firstName:"Aleksandre",
    lastName:"Nikolashvili",
    balance:130
  }
};

let currentDriver = null;

// --- ძებნა ---
function findDriver(){
  const phoneInput = document.getElementById("searchPhone");
  const phone = phoneInput.value.trim();

  if(!phone){
    alert("შეიყვანე ნომერი");
    return;
  }

  const driver = DRIVERS[phone];
  if(!driver){
    alert("მძღოლი ვერ მოიძებნა");
    return;
  }

  currentDriver = driver;

  document.getElementById("firstName").innerText = driver.firstName;
  document.getElementById("lastName").innerText = driver.lastName;
  document.getElementById("phone").innerText = phone;
  document.getElementById("balance").innerText = driver.balance.toFixed(2);

  document.getElementById("searchBlock").style.display = "none";
  document.getElementById("driverBlock").style.display = "block";

  // ნომერი იკეტება – მეორედ აღარ გთხოვს
  phoneInput.disabled = true;
}

// --- გადარიცხვა ---
function transfer(){
  const amount = parseFloat(document.getElementById("amount").value);
  if(!amount || amount <= 0){
    alert("შეიყვანე თანხა");
    return;
  }

  const fee = 0.5;
  const total = amount + fee;

  if(currentDriver.balance < total){
    alert("არასაკმარისი ბალანსი");
    return;
  }

  currentDriver.balance -= total;
  document.getElementById("balance").innerText =
    currentDriver.balance.toFixed(2);

  document.getElementById("result").innerText =
    `დაერიცხა ${amount.toFixed(2)} ₾ (საკომისიო 0.50 ₾)`;

  document.getElementById("amount").value = "";
}

// --- reset ---
function resetDriver(){
  currentDriver = null;

  document.getElementById("driverBlock").style.display = "none";
  document.getElementById("searchBlock").style.display = "block";

  const phoneInput = document.getElementById("searchPhone");
  phoneInput.value = "";
  phoneInput.disabled = false;

  document.getElementById("result").innerText = "";
}
</script>

</body>
</html>
